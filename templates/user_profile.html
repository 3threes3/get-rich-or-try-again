{% extends "layout.html" %}

{% block content %}

<div class="page-login">
    <div class="ui centered grid container">
      <div class="nine wide column">
        {% if failure %}
        <div class="ui icon warning message">
            <i class="lock icon"></i>
            <div class="content">
              <div class="header">
                Issue detected!
              </div>
              <p>{{ failure }}</p>
            </div>
          </div>
        {% endif %}
        {% if success %}
        <div class="ui success message">
          <div class="header">
            Your personal details have been updated
          </div>
          <p>Remember them for your future logins</p>
        </div>
        {% endif %}
        <div class="ui fluid card">
          <div class="content">
            <form class="ui form" method="post" action="/user_change">
              <div class="field">
                <label>Username</label>
              <input type="text" name="username" value="{{ username }}" />
              </div>
              <div class="field">
                <label>Current Password</label>
              <input type="password" name="current_password" value="" required/>
              </div>
              <div class="field">
                <label>New Password</label>
              <input type="password" name="new_password" value="" pattern="(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,}" title="Must contain at least one number and one uppercase and lowercase letter, and at least 8 or more characters"/>
              </div>
              <button class="ui primary labeled icon button" type="submit">
                <i class="unlock alternate icon"></i>
                Change
              </button>
          </form>
          </div>
        </div>
      </div>
    </div>
  </div>

{% endblock %}